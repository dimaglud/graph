<script lang="javascript">

    window.addEventListener('resize', function(event) {
        drawGraph();
    }, true);

    function drawGraph() {
        const container = document.getElementById('graph');
        const dot = document.getElementById('graph_dot');

        const width = container.offsetWidth;
        const height = container.offsetHeight;
        

        const weightInput = document.getElementById('inpWeight');
        const weight = weightInput.value;

        // added height (heightM)
        const heightInput = document.getElementById('inpHeight');
        const heightM = heightInput.value;

        // added Pulse
        const pulseInput = document.getElementById('inpPulse');
        const pulse = pulseInput.value;

        // added Pressure Upper (PressureU)
        const pressureInputU = document.getElementById('inpPressureU');
        const pressureU = pressureInputU.value;

        // added Pressure Lower (PressureL)
        const pressureInputL = document.getElementById('inpPressureL');
        const pressureL = pressureInputL.value;

        // added Age
        const ageInput = document.getElementById('inpAge');
        const age = ageInput.value;

        //TODO: get other needed parameters from inputs
        //TODO: add validation 

        var x = getWeightIndex(weight,heightM);
        var y = getHealthIndex(pulse,pressureU,pressureL,age,weight,heightM);
        
        //TODO: ajust coordinates to container width

        dot.style.left = x;
        dot.style.bottom = y;

        console.log("индекс Веса: " + x + " индексЗдоровья: " + y);
    }

    function getWeightIndex(weight, height) {
        //TODO
        return weight*10000/(height*height);
    }

    function getHealthIndex(pulse,pressureU,pressureL,age,weight,heightM) {
        //TODO
        return (700-3*pulse-2,5*((pressureU-pressureL)/3+pressureL)-2,7*age+0,28*weight)/(350-2.6*age+0.21*heightM);

    }

</script>

<style>

.main-container {
}

.form-container {
}

.btn-main {
    border-block-width: 2px;
}

.graph-container {
    width: 30%;
    height: 30%;
}

.graph-dot {
    width: 10px;
    height: 10px;
    position: relative;
    bottom: 30px;
    left: 60px;
    z-index: 2;
}

.graph-grid {
    width: 100%;
    height: 100%;
}
</style>

<div class="main-container">
    <div class="form-container">
        Вага, кг: <input type="number" id="inpWeight" />
        Зріст, см: <input type="number" id="inpHeight" /> <br/><br/>
        ------------------------------------------- <br/><br/>
        Пульс, уд/хв: <input type="number" id="inpPulse" /><br/><br/>
        Тиск, верхній/нижній: <input type="number" id="inpPressureU" />/<input type="number" id="inpPressureL" /> <br/><br/>
        Вік, років: <input type="number" id="inpAge" />
        
        <input class="btn-main" type="button" onclick="drawGraph()" value="Submit" />
    </div>
    
    <div class="graph-container" id="graph">
        <img class="graph-grid" src="./img/graph.svg" />
        <img class="graph-dot" id="graph_dot" src="./img/dot.svg" />
    </div>
</div>
